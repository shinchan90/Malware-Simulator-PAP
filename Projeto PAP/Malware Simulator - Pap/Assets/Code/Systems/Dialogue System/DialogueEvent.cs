using System.Collections;
using System.Collections.Generic;
using UnityEngine;
//Cria uma Menu que permite criar os Dialogue Events
//Funciona de uma maneira bastante semelhante ao sistema de eventos normais.
[CreateAssetMenu(menuName = "Dialogue Event", fileName = "DialogueEvent")]
public class DialogueEvent : ScriptableObject
{
    //Lista de ouvintes
    readonly List<DialogueEventListener> _DialogueListener = new();

    //Invoca os eventos de diálogo
    public void Raise(TextAsset JsonFile, string DialoguePart)
    {
        //Percorre a lista de ouvintes e começa o diálogo
        foreach (var Listener in _DialogueListener)
        {
            DialogueManager.GetInstance().StartDialogue(JsonFile, DialoguePart);
        }
    }

    public void RegisterDialogueEvent(DialogueEventListener Listener)
    {
        //Verifica se o ouvinte não existe na lista para o adicionar.
        if (!_DialogueListener.Contains(Listener))
        {
            _DialogueListener.Add(Listener);
        }
    }

    public void UnregisterDialogueEvent(DialogueEventListener Listener)
    {
        //Verifica se o ouvinte existe na lista para o remover.
        if (_DialogueListener.Contains(Listener))
        {
            _DialogueListener.Remove(Listener);
        }
    }
}
