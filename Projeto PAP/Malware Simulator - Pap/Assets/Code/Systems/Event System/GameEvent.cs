using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.Events;

//Cria um Menu de criação de Eventos disponivel no Inspector.
[CreateAssetMenu(menuName = "Game Event", fileName = "Event")]
public class GameEvent : ScriptableObject
{
    //Lista de Ouvintes
    readonly List<GameEventListener> _Listeners = new();
    
    public virtual void Raise()
    {
        //Percorre todos os ouvintes
        foreach(var Listener in _Listeners)
        {
            Listener.InvokeEvent();
        }
    }

    public void RegisterEvent(GameEventListener Listener)
    {
        //Verifica se o ouvinte não existe na para o adicionar á lista.
        if (!_Listeners.Contains(Listener))
        {
            _Listeners.Add(Listener);
        }
    }

    public void UnregisterEvent(GameEventListener Listener)
    {
        //Verifica se o ouvinte existe para o remover da lista.
        if(_Listeners.Contains(Listener)) 
        { 
            _Listeners.Remove(Listener);
        }
    }


}
