using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.EventSystems;
using UnityEngine.UI;

public class RemakeCursorInteraction : MonoBehaviour
{
    void Update()
    {
        ObjectInteractionRemake();
    }

    public void ObjectInteractionRemake()
    {
        if (Input.GetMouseButtonDown(0))
        {
            PointerEventData PointerData = new(EventSystem.current);
            PointerData.position = Input.mousePosition;

            List<RaycastResult> ResultsRaycast = new();
            EventSystem.current.RaycastAll(PointerData, ResultsRaycast);

            foreach (RaycastResult ResultRaycast in ResultsRaycast)
            {
                InteractableObject Interactable = ResultRaycast.gameObject.GetComponent<InteractableObject>();

                if (Interactable != null)
                {
                    Interactable.OnInteractable.Raise();
                    Interactable.TriggerDialogue();
                }
            }
        }
    }

}
