using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class AdManager : MonoBehaviour
{
    [SerializeField] private GameObject AdwarePrompts;
    [SerializeField] private GameObject Ad1;
    [SerializeField] private GameObject Ad2;
    [SerializeField] private GameObject[] Ads;
    [SerializeField] private float MinDelay = 0.1f;
    [SerializeField] private float MaxDelay = 0.9f;
    [SerializeField] private float DelayBetweenAds = 0.1f;

    void Start()
    {

    }

    // Update is called once per frame
    void Update()
    {

    }


    private IEnumerator CallPopUps()
    {
        yield return new WaitForSeconds(3);
        AdwarePrompts.SetActive(true);
        Ad1.SetActive(true);
        yield return new WaitForSeconds(1);
        Ad2.SetActive(true);
    }

    public void CallCoroutine()
    {
        StartCoroutine(ShowAds());
    }

    private void DisplayAds()
    {
        Debug.Log("It's executing");
        if (Ads != null && Ads.Length > 0)
        {
            int RandomIndex = UnityEngine.Random.Range(0, Ads.Length);

            foreach (GameObject ads in Ads)
            {
                Ads[RandomIndex].SetActive(true);
            }

            
        }

        else
        {
            Debug.Log("No ads");
        }
    }

    private IEnumerator ShowAds()
    {
        while (true)
        {
            DisplayAds();
            float Delay = UnityEngine.Random.Range(MinDelay, MaxDelay);
            float timer = 0f;
            while (timer < DelayBetweenAds)
            {
                timer += Time.deltaTime;
                yield return null;
            }
            //yield return new WaitForSeconds(Delay);
        }
        
    }
}
